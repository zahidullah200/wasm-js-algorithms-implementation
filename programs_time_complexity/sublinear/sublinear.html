<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sublinear Time Test</title>
</head>
<body>
    <h1>Sublinear Time Test</h1>
    <label id="titleLabel"></label><br>
    <label id="resultLabel"></label><br>
    <label id="timeLabel"></label><br>
    <label id="complexityLabel"></label>

    <script>
        // Define the imports object
        const imports = {
            wasi_snapshot_preview1: {
                // Provide an empty function for the exit function
                fd_close: () => {},
                // Provide an empty function for writing to file descriptor
                fd_write: () => {},
                // Provide an empty function for seeking within a file descriptor
                fd_seek: () => {}
            },
            env: {
                // Provide an empty function for the exit function
                exit: () => {},
                // Provide an empty function for memory growth
                emscripten_resize_heap: () => {},
                // Provide a callable function for memcpy
                emscripten_memcpy_js: (dest, source, num) => {
                    for (let i = 0; i < num; i++) {
                        Module.HEAP8[dest + i] = Module.HEAP8[source + i];
                    }
                }
            }
        };

        // Load the WebAssembly module
        WebAssembly.instantiateStreaming(fetch('sublinear.wasm'), imports)
            .then(obj => {
                const testSublinearTime = obj.instance.exports.testSublinearTime;

                // Measure performance time
                const startTime = performance.now();

                // Call the WebAssembly function
                const result = testSublinearTime();

                const endTime = performance.now();
                const elapsedTime = endTime - startTime;

                // Calculate time complexity
                const timeComplexity = 'O(log n)'; // Sublinear time complexity

                // Display title, result, performance time, and time complexity
                document.getElementById('titleLabel').textContent = `Title: Sublinear Time Test`;
                document.getElementById('resultLabel').textContent = `Result: ${result}`;
                document.getElementById('timeLabel').textContent = `Performance Time: ${elapsedTime.toFixed(2)} milliseconds`;
                document.getElementById('complexityLabel').textContent = `Time Complexity: ${timeComplexity}`;
            })
            .catch(err => console.error(err));
    </script>
</body>
</html>
